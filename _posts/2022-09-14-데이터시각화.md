---
layout: single
title: "데이터 시각화"
category: python
tag: [python, EDA, ML]
toc: true
toc_sticky: true
---

# 데이터 시각화

## 데이터의 종류
* 수치형 데이터
    * 연속형 데이터
    * 이산형 데이터
* 범주형 데이터
    * 순서형 데이터
    * 명목형 데이터

### 수치형 데이터
**사칙연산이 가능한 데이터**  
1. 연속형 데이터 : 값이 연속된 데이터. 키, 몸무게 등 값이 끊기지 않고 연속된 데이터를 연속형 데이터라고 한다.  
1. 이산형 데이터 : 정수로 딱 떨어져 셀 수 있는 데이터. 과일 개수, 첵의 페이지 수 등 딱 떨어지는 데이터.  
**쉽게, 연속형 데이터는 실수로 표현할 수 있는 데이터, 이산형 데이터는 정수로 표현할 수 있는 데이터**

### 범주형 데이터
**범주를 나눌 수 있는 데이터로 사칙연산이 불가능한 데이터**
1. 순서형 데이터 : 순위를 매길 수 있는 데이터. 학점, 메달은 순위가 있다.
1. 명목형 데이터 : 순위가 따로 없는 데이터. 성별과 우편번호 등이 있다. 우편번호는 숫자로 표현하지만 우리집 우편번호와 옆집 우편번호를 더한다고 해서 의미있는 우편번호가 되지 않는다.


```python
import seaborn as sns
print(sns.__version__)
```

    0.11.2
    


```python
# 타이타닉 데이터
titanic = sns.load_dataset('titanic')
```


```python
titanic.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>survived</th>
      <th>pclass</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>fare</th>
      <th>embarked</th>
      <th>class</th>
      <th>who</th>
      <th>adult_male</th>
      <th>deck</th>
      <th>embark_town</th>
      <th>alive</th>
      <th>alone</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>7.2500</td>
      <td>S</td>
      <td>Third</td>
      <td>man</td>
      <td>True</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>no</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>71.2833</td>
      <td>C</td>
      <td>First</td>
      <td>woman</td>
      <td>False</td>
      <td>C</td>
      <td>Cherbourg</td>
      <td>yes</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>7.9250</td>
      <td>S</td>
      <td>Third</td>
      <td>woman</td>
      <td>False</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>yes</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>53.1000</td>
      <td>S</td>
      <td>First</td>
      <td>woman</td>
      <td>False</td>
      <td>C</td>
      <td>Southampton</td>
      <td>yes</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>8.0500</td>
      <td>S</td>
      <td>Third</td>
      <td>man</td>
      <td>True</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>no</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div>



수치형 데이터(age, fare 등), 범주형 데이터(sex, embarked, class 등)이 존재

### 주요 분포도 함수
* **histplot() : 히스토그램**
* **kdeplot() : 커널밀도추정 함수 그래프**
* **displot() : 분포도**
* **rugplot() : 러그플롯**

### 수치형 데이터 시각화

#### 히스토그램(histplot)


```python
sns.histplot(data = titanic, x='age')
```




    <AxesSubplot:xlabel='age', ylabel='Count'>




![png](images/2022-09-14-데이터시각화/output_11_1.png)


구간 개수를 지정하는 `bins` 파라미터의 기본값을 설정


```python
sns.histplot(data = titanic, x='age', bins=10)
```




    <AxesSubplot:xlabel='age', ylabel='Count'>




![png](images/2022-09-14-데이터시각화/output_13_1.png)


특정 범주별로 구분해서 보려면 `hue` 파라미터를 이용


```python
## 생존여부에 따른 연령분포
sns.histplot(data=titanic, x='age', hue='alive')
```




    <AxesSubplot:xlabel='age', ylabel='Count'>




![png](images/2022-09-14-데이터시각화/output_15_1.png)


그래프를 겹치는게 아닌 누적그래프를 그리기 위해서 `multiple='stack'`을 이용


```python
sns.histplot(data=titanic, x='age', hue='alive', multiple='stack')
```




    <AxesSubplot:xlabel='age', ylabel='Count'>




![png](images/2022-09-14-데이터시각화/output_17_1.png)


#### 커널밀도추정 함수(kdeplot)
* 매끄럽게 곡선으로 연결한 그래프
* 실제로 많이 사용하지는 않는다.


```python
sns.kdeplot(data=titanic, x='age')
```




    <AxesSubplot:xlabel='age', ylabel='Density'>




![png](images/2022-09-14-데이터시각화/output_19_1.png)


히스토그램과 전체적인 모양은 비슷하다.


```python
sns.kdeplot(data=titanic, x='age', hue='alive', multiple='stack')
```




    <AxesSubplot:xlabel='age', ylabel='Density'>




![png](images/2022-09-14-데이터시각화/output_21_1.png)


#### 분포도(displot)
* 수치형 데이터 하나의 분포를 나타내는 그래프

파라미터를 기본값으로 두면 히스토그램을 그림


```python
sns.displot(data=titanic, x='age')
```




    <seaborn.axisgrid.FacetGrid at 0x2859362bfa0>




![png](images/2022-09-14-데이터시각화/output_24_1.png)


`kind`파라미터에 `kde`를 적용


```python
sns.displot(data=titanic, x='age', kind='kde')
```




    <seaborn.axisgrid.FacetGrid at 0x28593d57730>




![png](images/2022-09-14-데이터시각화/output_26_1.png)


히스토그램과 커널밀도추정 함수 그래프를 동시에 그리기 `kde=True`를 이용


```python
sns.displot(data=titanic, x='age', kde=True)
```




    <seaborn.axisgrid.FacetGrid at 0x28593c8dd30>




![png](images/2022-09-14-데이터시각화/output_28_1.png)


#### 러글플롯(rugplot)
* 단독으로 사용하기 보단 다른 분포도 그래프와 함께 사용


```python
sns.kdeplot(data=titanic, x='age')
sns.rugplot(data=titanic, x='age')
```




    <AxesSubplot:xlabel='age', ylabel='Density'>




![png](images/2022-09-14-데이터시각화/output_30_1.png)


러그플롯은 단일 피처가 어떻게 분포돼 있는지를 x축 위에 작은 선분으로 표시한다.  
값이 밀집돼 있을수록 작은 선분들도 밀집돼 있다.

### 범주형 데이터 시각화

* barplot()
* pointplot()
* boxplot()
* violinplot()
* countplot()

#### 막대그래프(barplot)
* 범주형 데이터 값에 따라 수치형 데이터 값이 어떻게 달라지는지 파악
* 범주형 데이터에 따른 수치형 데이터의 평균과 신뢰구간을 그려준다.  
* 평균은 막대높이, 신뢰구간은 오차막대로 표현


```python
sns.barplot(x='class', y='fare', data=titanic)
```




    <AxesSubplot:xlabel='class', ylabel='fare'>




![png](images/2022-09-14-데이터시각화/output_35_1.png)


등급이 높을수록 운임이 비싸고 신뢰구간이 넓다.

barplot()으로 평균이 아닌 중앙값, 최댓값, 최솟값을 구할 수도 있다.


```python
import numpy as np
```


```python
sns.barplot(x='class', y='fare', data=titanic, estimator=np.median)
```




    <AxesSubplot:xlabel='class', ylabel='fare'>




![png](images/2022-09-14-데이터시각화/output_39_1.png)



```python
sns.barplot(x='class', y='fare', data=titanic, estimator=np.max)
```




    <AxesSubplot:xlabel='class', ylabel='fare'>




![png](images/2022-09-14-데이터시각화/output_40_1.png)



```python
sns.barplot(x='class', y='fare', data=titanic, estimator=np.min)
```




    <AxesSubplot:xlabel='class', ylabel='fare'>




![png](images/2022-09-14-데이터시각화/output_41_1.png)


#### 포인트플롯(pointplot)
* barplot과 동일한 정보를 제공
* 그래프를 점과 선으로 나타냄


```python
sns.pointplot(x='class', y='fare', data=titanic)
```




    <AxesSubplot:xlabel='class', ylabel='fare'>




![png](images/2022-09-14-데이터시각화/output_43_1.png)


한 화면에 여러 그래프를 그릴 때 유용하다.

#### 박스플롯(boxplot)
* 요약 수치를 제공한다
    1. 제1사분위 수(Q1) : 전체 데이터 중 하위 25%에 해당하는 값
    1. 제2사분위 수(Q2) : 50%에 해당하는 값(중앙값)
    1. 제3사분위 수(Q3) : 상위 25%에 해당하는 값
    1. 사분위 범위 수(IQR) : Q3 - Q1
    1. 최댓값 : Q3 + (1.5 * IQR)
    1. 최솟값 : Q3 - (1.5 * IQR)
    1. 이상치 : 최댓값보다 큰 값과 최솟값보다 작은 값


```python
sns.boxplot(x='class', y='age', data=titanic)
```




    <AxesSubplot:xlabel='class', ylabel='age'>




![png](images/2022-09-14-데이터시각화/output_46_1.png)


#### 바이올린플롯(violinplot)
* 박스플롯과 커널밀도추정 함수 그래프를 합쳐 놓은 그래프라고 볼 수 있다.


```python
sns.violinplot(x='class', y='age', data=titanic)
```




    <AxesSubplot:xlabel='class', ylabel='age'>




![png](images/2022-09-14-데이터시각화/output_48_1.png)


`split=True`를 이용하면 `hue`에 전달한 피처를 반으로 나누어 보여준다.


```python
sns.violinplot(x='class', y='age', hue='sex', data=titanic, split=True)
```




    <AxesSubplot:xlabel='class', ylabel='age'>




![png](images/2022-09-14-데이터시각화/output_50_1.png)


#### 카운트플롯(countplot)
* 범주형 데이터의 개수를 확인할 때 사용하는 그래프


```python
sns.countplot(x='class', data=titanic)
```




    <AxesSubplot:xlabel='class', ylabel='count'>




![png](images/2022-09-14-데이터시각화/output_52_1.png)



```python
sns.countplot(y='class', data=titanic)
```




    <AxesSubplot:xlabel='count', ylabel='class'>




![png](images/2022-09-14-데이터시각화/output_53_1.png)

